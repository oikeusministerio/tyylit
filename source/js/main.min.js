function IsEmail(a){var b=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return b.test(a)}function setCounter(a){if($(a).attr("maxlength")&&!$(a).hasClass("search-field")){var b=$(a);b.wrap('<div style="position: relative;"></div>');var c=b.parent();b.after('<span class="textarea-word-count inactive"></span>'),maxlength=b.attr("maxlength"),reallength=maxlength-b.val().length,c.find(".textarea-word-count").text(reallength),b.keyup(function(){c.find(".textarea-word-count").hasClass("inactive")&&c.find(".textarea-word-count").removeClass("inactive"),maxlength=b.attr("maxlength"),reallength=maxlength-b.val().length,c.find(".textarea-word-count").text(reallength),b.is("textarea")&&b.hasClass("js-dynamic")&&b.height(1).height(b[0].scrollHeight)})}}function checkDateInput(){var a=document.createElement("input");a.setAttribute("type","date");var b="not-a-date";return a.setAttribute("value",b),!(a.value===b)&&"date"==a.type}function Toast(a,b,c){this.type=a,this.css=b,this.msg=c}function cleanShortcutInput(a){if(null==a||0==a.length)return a;var b=a.toLowerCase().replace(/ /g,"_").replace(/[äÄåÅáÁ]/gi,"a").replace(/ö/g,"o").replace(/é/g,"e").replace(/[^a-z-0-9-_]/g,"").trim(),c=$("<div/>").text(b).html();return c}if(moment.lang("fi"),$(".js-show").removeClass("js-show"),$(".btn-group").length&&($(".btn-group").find("a").click(function(a){a.preventDefault(),$(this).parent().find("a").each(function(){$(this).removeClass("active")}),$(this).addClass("active")}),$(".btn-group").find("input").length&&$(".btn-group").find("input").click(function(){$(this).parent().find("input").each(function(){$(this).removeClass("active")}),$(this).is(":radio")?($(this).parent().parent().find("li").removeClass("active"),$(this).parent().addClass("active")):$(this).addClass("active")})),$(".label-as-button").each(function(){"disabled"===$(this).find("input").attr("disabled")&&$(this).addClass("disabled"),$(this).find("input[type=checkbox]")&&($(this).find("input[type=checkbox]").is(":checked")&&$(this).addClass("active"),$(this).find("input[type=checkbox]").on("change",function(){$(this).parent().toggleClass("active")}))}),$("#email").blur(function(){var a=$("#email").val();IsEmail(a)?($(".icon-ok").hasClass("is-hidden")&&($(".icon-ok").removeClass("is-hidden"),$(".icon-ok").addClass("is-visible")),$(".error-text").hasClass("is-visible")&&($(".error-text").addClass("is-hidden"),$(".error-text").removeClass("is-visible"))):($(".icon-ok").hasClass("is-visible")&&($(".icon-ok").removeClass("is-visible"),$(".icon-ok").addClass("is-hidden")),$(".error-text").hasClass("is-hidden")&&($(".error-text").addClass("is-visible"),$(".error-text").removeClass("is-hidden")))}),$("textarea, input").each(function(){setCounter($(this))}),checkDateInput()?$(".datepicker").remove():($("input[type=date]").remove(),$(".datepicker").each(function(){new Pikaday({field:$(this)[0],format:"dd D.M.YYYY",i18n:{previousMonth:"Edellinen kuukausi",nextMonth:"Seuraava kuukaus",months:["January","February","March","April","May","June","July","August","September","October","November","December"],months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],weekdays:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],weekdaysShort:["Su","Ma","Ti","Ke","To","Pe","La"]}})})),$(".navi-sample ul li ul").css("visibility","hidden"),$(".navi-sample ul li.toplevel .arrow-link").click(function(a){a.stopPropagation(),"hidden"==$(this).next("ul").css("visibility")?($(".navi-top ul li ul").css("visibility","hidden"),$(this).next("ul").css("visibility","visible")):$(this).next("ul").css("visibility","hidden")}),$(".fadeout").length){var orig_text;$(".fadeout").each(function(){$(this).children(":first")[0].clientHeight<160&&($(this).parent().addClass("open"),$(this).addClass("pt-fix"),$(this).parent().find(".read-more").remove())}),$(".read-more").find("a").click(function(a){a.preventDefault(),orig_text=$(this).text(),$(this).parent().parent(".fadeout").addClass("open"),$(this).addClass("pt-fix"),$(this).parent().remove()})}$(".helper-container").length&&$(".icon-help").on("click",function(){$(this).parent().find(".helper-text").toggleClass("is-visible is-vishidden")}),$(".site-actions > a, #closeButtonContainer").click(function(){$(".site-actions > a").removeClass("selected"),$(this).addClass("selected")}),$(".expandable").each(function(){var a=$(this),b=$(".close",a);b.click(function(){a.removeClass("expanded"),$(".navi-responsive").removeClass("is-visible")})});var show_section=function(a){a.hasClass("is-visible")?($(".expandable").removeClass("expanded"),$(".navi-responsive").removeClass("is-visible"),$(a.selector).removeClass("is-visible"),$(".site-actions").find("a").removeClass("selected")):a.hasClass("navi-responsive")?(a.addClass("is-visible").find(".section").removeClass("is-visible"),$("body").find(".expandable").addClass("expanded expanded-navi"),$(".expandable").find(".section").removeClass("is-visible"),$(".site-actions").find("a").removeClass("selected")):(a.addClass("is-visible").siblings(".section").removeClass("is-visible"),$(".navi-responsive").removeClass("is-visible"),$(".navi-responsive").find(".sub-nav-open").parent().find("ul").slideUp(),$(".navi-responsive").find(".sub-nav-open").removeClass("sub-nav-open"),a.closest(".expandable").removeClass("expanded-navi expanded-full-navi"),a.closest(".expandable").addClass("expanded"))};if($("#hlLogin,#hlLogin2").click(function(a){show_section($("#pnlLogin")),a.preventDefault()}),$("#hlRegister,#hlRegister2").click(function(a){show_section($("#pnlRegistration")),a.preventDefault()}),$("#hlPasswordRecover").click(function(a){show_section($("#pnlPasswordRecover")),a.preventDefault()}),$(".navi-responsive").length){var m_trigger=$(".mobile-trigger a"),sn_trigger=$(".sub-nav-trigger"),nav=$(".navi-responsive");m_trigger.click(function(a){a.preventDefault(),show_section(nav)}),sn_trigger.click(function(a){a.preventDefault(),a.stopPropagation(),$(this).parent().find("ul").slideToggle(200),$(this).toggleClass("sub-nav-open"),$(".expandable").hasClass("expanded-navi")&&$(".expandable").addClass("expanded-full-navi")}),$("html").click(function(){$(".navi-responsive").find("li").find("ul").slideUp(50),$(".navi-responsive").find("a").removeClass("sub-nav-open")})}if(window.onresize=function(){$(".expandable").hasClass("expanded-navi")&&window.innerWidth>768&&($(".expandable").removeClass("expanded expanded-navi expanded-full-navi"),$(".navi-responsive").removeClass("is-visible"))},$(".user-navigation").length){var u_trigger=$(".user-navigation").find(".icon-arrow");u_trigger.on("click",function(){$(this).parent().find("ul").toggleClass("is-visible is-vishidden")})}var toasts=[new Toast("error","toast-top-full-width",$(".msg-error").find(".msg-toast").html()),new Toast("info","toast-top-full-width",$(".msg-info").find(".msg-toast").html()),new Toast("warning","toast-top-full-width",$(".msg-warning").find(".msg-toast").html()),new Toast("success","toast-top-full-width",$(".msg-success").find(".msg-toast").html())];toastr.options.positionClass="toast-top-full-width",toastr.options.extendedTimeOut=0,toastr.options.timeOut=0,toastr.options.fadeOut=250,toastr.options.fadeIn=250,$(".toast-container").find(".toast-trigger").on("click",function(){var a;toast_type=$(this).attr("id");for(var b=0;b<toasts.length;b++)toast_type===toasts[b].type&&(a=toasts[b]);toastr[a.type](a.msg)}),$("#myCarousel").carousel({interval:7e3,pause:"hover"}),$("#myCarousel > a[data-slide]").click(function(){$("#myCarousel").carousel("pause")}),$("#myCarousel .carousel-indicators li").click(function(){$("#myCarousel").carousel("pause")}),$("#myCarousel").on("slid.bs.carousel",function(){$(this).find(".active").hasClass("item-text")?($(".carousel-indicators").addClass("inverse-color"),$(".carousel-control").addClass("inverse-color")):($(".carousel-indicators").removeClass("inverse-color"),$(".carousel-control").removeClass("inverse-color"))});var $document=$(document),selector="[data-rangeslider]",$input=$(selector);if($document.on("change",selector,function(a){a.target.value}),$input.rangeslider({polyfill:!1}),$(".tagit-list").tagit({allowSpaces:!0,availableTags:["demokratia","äänestys","foo","bar","lorem","lipsum","otakantaa","ota kantaa","vaalit"]}),$(".tagit-list .tagit-new input.ui-autocomplete-input").attr("placeholder","Aloita kirjoittamaan asiasanaa"),$(".tagit-list").length){var length=$(".tagit-list .tagit-new").find("input").attr("placeholder").length;$(".tagit-list .tagit-new").find("input").attr("size",length)}if($(".location-list").tagit({allowSpaces:!0,availableTags:["Turku","Helsinki","Tampere","Oulu","Jyväskylä","Vaasa","Seinäjoki","Rovaniemi","Hanko"]}),$(".location-list .tagit-new input.ui-autocomplete-input").attr("placeholder","Aloita kirjoittamaan paikkakunnan nimeä"),$(".location-list").length){var length=$(".location-list .tagit-new").find("input").attr("placeholder").length;$(".location-list .tagit-new").find("input").attr("size",length)}if($(".person-list").tagit({allowSpaces:!0,availableTags:["Matti Meikäläinen","Oskari Olematon","David Hasselhoff","Homer Simpson","Aku Ankka","Roope Ankka","B Virtanen"]}),$(".person-list .tagit-new input.ui-autocomplete-input").attr("placeholder","Aloita kirjoittamaan henkilön nimeä"),$(".person-list").length){var length=$(".person-list .tagit-new").find("input").attr("placeholder").length;$(".person-list .tagit-new").find("input").attr("size",length)}$("#btnAddParticipationContainer").find("a").on("click",function(){$("#showParticipations").addClass("is-hidden"),$("#addParticipations").removeClass("is-hidden")}),$("#btnCancelParticipationContainer").find("a").on("click",function(){$("#showParticipations").removeClass("is-hidden"),$("#addParticipations").addClass("is-hidden")}),$("#rblIDontAcceptTerms").click(function(){$("#btnSaveHanke").attr("disabled",!0).removeClass("btn-otk")}),$("#rblTermsAccepted").click(function(){$("#btnSaveHanke").attr("disabled",!1).addClass("btn-otk")}),function(a){a.fn.delayKeyup=function(b,c){return a(this).keyup(function(d){var e=d.currentTarget;e.delayTimer&&clearTimeout(e.delayTimer),e.delayTimer=setTimeout(function(){b(a(e))},c)}),a(this)}}(jQuery),$("input[data-source][data-type]").each(function(){var a=$(this);if("shortcut"==a.data("type")){var b=$("#"+a.data("source"));b.val()?b.off("keyup"):b.on("keyup",function(){a.val(cleanShortcutInput(b.val()))}),a.delayKeyup(function(){a.val()?b.off("keyup"):b.on("keyup",function(){a.val(cleanShortcutInput(b.val()))}),a.val(cleanShortcutInput(a.val()))},1e3)}}),$("#btnAddHankeLink").click(function(){$("#hanke-links ol").append('<li><input class="counterhack" placeholder="http://" maxlength="200" /><input class="counterhack" placeholder="Kirjoita linkin kuvaus..." maxlength="100" /></li>'),$("#hanke-links ol .counterhack").each(function(){setCounter($(this)),$(this).removeClass("counterhack")})}),$(".debug-hide").click(function(){$(this).parent().hide()}),$(".js-thumbnail-hover").hover(function(){$(this).find(".js-thumbnail").delay(250).show(100)},function(){$(this).find(".js-thumbnail").hide(50).stop(!0,!0)});